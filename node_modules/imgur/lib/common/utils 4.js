"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createForm = exports.getSource = exports.isVideo = void 0;
const tslib_1 = require("tslib");
const fs_1 = require("fs");
const form_data_1 = tslib_1.__importDefault(require("form-data"));
function isVideo(payload) {
    if (typeof payload === 'string') {
        return false;
    }
    return typeof payload.video === 'string';
}
exports.isVideo = isVideo;
function getSource(payload) {
    if (typeof payload === 'string') {
        return payload;
    }
    if (isVideo(payload)) {
        return payload.video;
    }
    else {
        return payload.image;
    }
}
exports.getSource = getSource;
function createForm(payload) {
    const form = new form_data_1.default();
    if (typeof payload === 'string') {
        form.append('image', fs_1.createReadStream(payload));
        return form;
    }
    for (const [key, value] of Object.entries(payload)) {
        if (key === 'image' || key === 'video') {
            if (!payload.type || payload.type === 'file')
                form.append(key, fs_1.createReadStream(value));
        }
        else {
            form.append(key, value);
        }
    }
    return form;
}
exports.createForm = createForm;
//# sourceMappingURL=utils.js.map